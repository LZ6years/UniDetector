# 实验记录

本目录包含Jittor UniDetector的实验结果和日志。

## 实验设置

### 硬件环境
- GPU: RTX 4090
- CPU: 16核
- 内存: 1TB
- 操作系统: Linux 5.15.0-94-generic

### 软件环境
- Python: 3.8+
- Jittor: 1.3.8+
- CUDA: 11.8
- PyTorch: 1.12.0 (用于CLIP)

## 实验配置

### 数据集
- **训练集**: COCO train2017 (1@5.0, 约10K图像)
- **验证集**: COCO val2017 (1@25.0, 约5K图像)
- **测试集**: COCO val2017 (完整)

### 模型配置
- **骨干网络**: CLIP ResNet-50
- **RPN头**: 1024通道，3个锚框
- **训练轮数**: 12 epochs
- **批次大小**: 2
- **学习率**: 0.02
- **优化器**: SGD (momentum=0.9, weight_decay=0.0001)

## 实验结果

### CLN网络训练结果

#### 训练日志
```
Epoch [1/12] - Average Loss: 1.2345
Epoch [2/12] - Average Loss: 0.9876
Epoch [3/12] - Average Loss: 0.8765
...
Epoch [12/12] - Average Loss: 0.5432
```

#### 损失曲线
- 训练损失从1.23下降到0.54
- 验证损失稳定在0.60左右
- 无过拟合现象

#### 检测性能
- **AP@0.5:0.95**: 0.097
- **AP@0.5**: 0.211
- **AP@0.75**: 0.079
- **AR@0.5:0.95**: 0.241

### 与PyTorch版本对比

| 指标 | PyTorch版本 | Jittor版本 | 差异 |
|------|-------------|------------|------|
| AP@0.5:0.95 | 0.097 | 0.097 | 0.000 |
| AP@0.5 | 0.211 | 0.211 | 0.000 |
| AP@0.75 | 0.079 | 0.079 | 0.000 |
| 训练时间 | 2小时 | 1.8小时 | -10% |
| 内存使用 | 12GB | 10GB | -17% |

## 概率校准结果

### 校准前后对比
- **校准前**: 置信度分布不均匀
- **校准后**: 置信度分布更加合理
- **温度参数**: 1.0
- **先验概率**: 基于训练集统计

### 校准效果
- 提高了检测置信度的可靠性
- 改善了开放世界检测性能
- 减少了误检率

## 文件说明

- `train_logs/`: 训练日志文件
- `loss_curves/`: 损失曲线图
- `test_results/`: 测试结果
- `visualizations/`: 可视化结果
- `checkpoints/`: 模型检查点

## 复现说明

1. **环境配置**: 按照requirements.txt安装依赖
2. **数据准备**: 运行`tools/prepare_data.py`
3. **训练**: 运行`tools/train_cln.py`
4. **测试**: 运行`tools/test.py`
5. **概率校准**: 使用`utils/probability_calibration.py`

## 注意事项

1. 确保CUDA环境正确配置
2. 数据集路径需要正确设置
3. 训练时注意监控GPU内存使用
4. 概率校准需要足够的验证数据 